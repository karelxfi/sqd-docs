---
title: "Quickstart"
description: "Get started with Pipes SDK for Solana in minutes"
---

Index Orca Whirlpool swap instructions from Solana mainnet.

## Prerequisites

- Node.js 18+ installed
- TypeScript project initialized

<Steps>
<Step title="Download and install">
  Install the Pipes SDK package.

  <CodeGroup>
  ```bash npm
  npm install @sqd-pipes/pipes
  ```

```bash pnpm
pnpm add @sqd-pipes/pipes
```

```bash yarn
yarn add @sqd-pipes/pipes
```

```bash bun
bun add @sqd-pipes/pipes
```

  </CodeGroup>
</Step>

<Step title="Create the script">
  Create a file `index.ts` with the following code:

```ts index.ts
import {
  createSolanaInstructionDecoder,
  createSolanaPortalSource,
} from "@sqd-pipes/pipes/solana";
import * as orcaWhirlpool from "./abi/orca_whirlpool/index.js";

async function main() {
  const source = createSolanaPortalSource({
    portal: "https://portal.sqd.dev/datasets/solana-mainnet",
  });

  const decoder = createSolanaInstructionDecoder({
    range: { from: 200000000, to: 200001000 },
    programId: orcaWhirlpool.programId,
    instructions: {
      swap: orcaWhirlpool.instructions.swap,
      swapV2: orcaWhirlpool.instructions.swapV2,
    },
  });

  for await (const { data } of source.pipe(decoder)) {
    console.log(`Swaps: ${data.swap.length + data.swapV2.length}`);
    for (const swap of [...data.swap, ...data.swapV2]) {
      console.log(
        `  Slot ${swap.blockNumber}: Swap instruction in tx ${swap.transaction.signatures[0]}`
      );
    }
  }
}

void main();
```

</Step>

<Step title="Run the script">
  Execute the script to start indexing swap instructions.

  <CodeGroup>
  ```bash tsx
  npx tsx index.ts
  ```

```bash ts-node
npx ts-node index.ts
```

```bash bun
bun index.ts
```

  </CodeGroup>

You should see swap instructions printed to the console:

```text
Swaps: 42
  Slot 200000123: Swap instruction in tx 0x123...
  Slot 200000124: Swap instruction in tx 0x456...
...
```

</Step>
</Steps>

## Complete Code

<AccordionGroup>
<Accordion title="View complete code with explanations">
The complete code retrieves and decodes Orca Whirlpool swap instructions from Solana mainnet.

```ts index.ts
import {
  createSolanaInstructionDecoder,
  createSolanaPortalSource,
} from "@sqd-pipes/pipes/solana";
import * as orcaWhirlpool from "./abi/orca_whirlpool/index.js";

async function main() {
  // Create a Portal source that streams blockchain data
  const source = createSolanaPortalSource({
    portal: "https://portal.sqd.dev/datasets/solana-mainnet",
  });

  // Create a decoder that automatically decodes swap instructions
  const decoder = createSolanaInstructionDecoder({
    // Process slots 200000000 to 200001000
    range: { from: 200000000, to: 200001000 },
    // Monitor the Orca Whirlpool program
    programId: orcaWhirlpool.programId,
    // Decode swap and swapV2 instructions using the program ABI
    instructions: {
      swap: orcaWhirlpool.instructions.swap,
      swapV2: orcaWhirlpool.instructions.swapV2,
    },
  });

  // Stream and process decoded instructions
  for await (const { data } of source.pipe(decoder)) {
    console.log(`Swaps: ${data.swap.length + data.swapV2.length}`);
    // Each swap contains decoded instruction data
    for (const swap of [...data.swap, ...data.swapV2]) {
      console.log(
        `  Slot ${swap.blockNumber}: Swap instruction in tx ${swap.transaction.signatures[0]}`
      );
    }
  }
}

void main();
```

### How it works

1. **Portal source**: `createSolanaPortalSource` connects to the Portal API and streams Solana blockchain data
2. **Decoder**: `createSolanaInstructionDecoder` filters and decodes program instructions using ABIs
3. **Pipe**: `.pipe()` chains the decoder to the source
4. **Stream**: The `for await` loop processes batches of decoded data as they arrive

### Data structure

Each decoded swap instruction contains:

- `blockNumber`: Slot number where the instruction occurred
- `timestamp`: Block timestamp
- `programId`: Program address that executed the instruction
- `transaction`: Transaction details including signatures
- `instruction`: Decoded instruction fields (accounts, data)
- `rawInstruction`: Raw instruction data

### Next steps

- Use `range: { from: 'latest' }` to stream from the latest slots
- Add multiple programs or instruction types
- Use `createTarget` to persist data to a database
- See [Basics](/en/sdk/pipes-sdk/solana/basics) for more examples

</Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
<Card
  title="Basics"
  icon="book"
  href="/en/sdk/pipes-sdk/solana/basics"
>
  Learn fundamental concepts
</Card>

<Card
  title="Stateful Indexing"
  icon="database"
  href="/en/sdk/pipes-sdk/solana/stateful-indexing"
>
  Handle cursors and forks
</Card>

<Card
  title="Core Concepts"
  icon="lightbulb"
  href="/en/sdk/pipes-sdk/core-concepts/core-concepts"
>
  Understand the architecture
</Card>

<Card
  title="Reference"
  icon="code"
  href="/en/sdk/pipes-sdk/solana/reference/sources"
>
  API reference
</Card>
</CardGroup>

