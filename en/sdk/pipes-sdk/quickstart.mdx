---
title: "Quickstart"
description: "Build a pipe in 5 minutes"
---

Index USDC transfers from Ethereum mainnet.

## Prerequisites

- Node.js 18+ installed
- TypeScript project initialized

## Build Your First Pipe

<Steps>
<Step title="Install Pipes SDK">
  Add the Pipes package to your project.

  <CodeGroup>
  ```bash npm
  npm install @sqd-pipes/pipes
  ```

```bash pnpm
pnpm add @sqd-pipes/pipes
```

```bash yarn
yarn add @sqd-pipes/pipes
```

  </CodeGroup>

{" "}

<Note>
  The package name is `@sqd-pipes/pipes` and includes everything you need for
  EVM data indexing.
</Note>

  <Check>
  Verify installation by checking your `package.json` for `@sqd-pipes/pipes`.
  </Check>
</Step>

<Step title="Create the query builder">
  Build a query to fetch USDC Transfer events from Ethereum mainnet.

```ts index.ts
import { createTarget } from "@sqd-pipes/pipes";
import { createEvmPortalSource, EvmQueryBuilder } from "@sqd-pipes/pipes/evm";

const queryBuilder = new EvmQueryBuilder()
  .addFields({
    block: {
      number: true, // required
      hash: true, // required
    },
    log: {
      address: true,
      topics: true,
      data: true,
      transactionHash: true,
    },
  })
  .addLog({
    request: {
      address: ["0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"], // USDC
      topic0: [
        "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef",
      ], // Transfer event signature
    },
    range: {
      from: 20000000,
      to: 20000000,
    },
  });
```

{" "}

<Note>
  `addFields` selects which blockchain data to return. `block.number` and
  `block.hash` are required fields. `addLog` filters for specific events by
  contract address and event signature.
</Note>

  <Tip>
  `0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48` is the USDC token contract on Ethereum mainnet. The topic0 is the keccak256 hash of the Transfer event signature.
  </Tip>
</Step>

<Step title="Set up the Portal source">
  Create a data source that streams from the Portal API.

```ts index.ts
const source = createEvmPortalSource({
  portal: "https://portal.sqd.dev/datasets/ethereum-mainnet",
  query: queryBuilder,
});
```

  <Note>
  Portal URLs are dataset endpoints. See [all available networks](/en/data/networks/evm) for other chains.
  </Note>
</Step>

<Step title="Create the target">
  Define where and how to process the streaming data.

```ts index.ts
const target = createTarget({
  write: async ({ ctx: { logger }, read }) => {
    for await (const { data } of read()) {
      logger.info(data, "data");
    }
  },
});
```

  <Tip>
  The `logger` is provided by context and automatically logs structured data. The `read()` function returns an async iterator of data batches.
  </Tip>
</Step>

<Step title="Connect and run">
  Connect the source to the target and wrap in a main function.

```ts index.ts
async function main() {
  await source.pipeTo(target);
}

main();
```

  <Check>
  Your complete `index.ts` should have imports, query builder, source, target, and the main function.
  </Check>
</Step>

<Step title="Execute the script">
  Run your pipe to start indexing.

  <CodeGroup>
  ```bash tsx
  npx tsx index.ts
  ```

```bash ts-node
npx ts-node index.ts
```

  </CodeGroup>

You should see output like:

```json
{
  "blocks": [
    {
      "header": { "number": 20000000, "hash": "0x..." },
      "logs": [...]
    }
  ]
}
```

  <Check>
  Your pipe is working if you see blockchain data streaming to the console.
  </Check>
</Step>
</Steps>

## Complete Code

<AccordionGroup>
<Accordion title="View complete code">
```ts index.ts expandable
import { createTarget } from "@sqd-pipes/pipes";
import {
  createEvmPortalSource,
  EvmQueryBuilder,
} from "@sqd-pipes/pipes/evm";

const queryBuilder = new EvmQueryBuilder()
.addFields({
block: {
number: true,
hash: true,
},
log: {
address: true,
topics: true,
data: true,
transactionHash: true,
},
})
.addLog({
request: {
address: ["0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"], // USDC
topic0: [
"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef",
], // Transfer
},
range: {
from: 20000000,
to: 20000000,
},
});

async function main() {
const source = createEvmPortalSource({
portal: "https://portal.sqd.dev/datasets/ethereum-mainnet",
query: queryBuilder,
});

const target = createTarget({
write: async ({ ctx: { logger }, read }) => {
for await (const { data } of read()) {
logger.info(data, "data");
}
},
});

await source.pipeTo(target);
}

main();

```
</Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
<Card
  title="Core Concepts"
  icon="book"
  href="/en/sdk/pipes-sdk/core-concepts/core-concepts"
>
  Understand the architecture
</Card>

<Card
  title="Query Builder"
  icon="filter"
  href="/en/sdk/pipes-sdk/core-concepts/query-builder"
>
  Learn query building
</Card>

<Card
  title="Event Decoding"
  icon="code"
  href="/en/sdk/pipes-sdk/core-concepts/event-decoding"
>
  Decode smart contract events
</Card>

<Card
  title="Examples"
  icon="lightbulb"
  href="/en/sdk/pipes-sdk/examples/getting-started"
>
  See more examples
</Card>
</CardGroup>
```
