---
title: "Quickstart"
description: "Get started with Pipes SDK in minutes"
---

Index ERC20 Transfer events from Ethereum mainnet.

## Prerequisites

- Node.js 18+ installed
- TypeScript project initialized

<Steps>
<Step title="Download and install">
  Install the Pipes SDK package.

  <CodeGroup>
  ```bash npm
  npm install @sqd-pipes/pipes
  ```

```bash pnpm
pnpm add @sqd-pipes/pipes
```

```bash yarn
yarn add @sqd-pipes/pipes
```

```bash bun
bun add @sqd-pipes/pipes
```

  </CodeGroup>
</Step>

<Step title="Create the script">
  Create a file `index.ts` with the following code:

```ts index.ts
import {
  commonAbis,
  createEvmDecoder,
  createEvmPortalSource,
} from "@sqd-pipes/pipes/evm";

async function main() {
  const source = createEvmPortalSource({
    portal: "https://portal.sqd.dev/datasets/ethereum-mainnet",
  });

  const decoder = createEvmDecoder({
    range: { from: 20000000, to: 20000100 },
    contracts: ["0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"], // USDC
    events: {
      transfer: commonAbis.erc20.events.Transfer,
    },
  });

  for await (const { data } of source.pipe(decoder)) {
    console.log(`Transfers: ${data.transfer.length}`);
    for (const transfer of data.transfer) {
      console.log(
        `  ${transfer.event.from} -> ${transfer.event.to}: ${transfer.event.value}`
      );
    }
  }
}

void main();
```

</Step>

<Step title="Run the script">
  Execute the script to start indexing Transfer events.

  <CodeGroup>
  ```bash tsx
  npx tsx index.ts
  ```

```bash ts-node
npx ts-node index.ts
```

```bash bun
bun index.ts
```

  </CodeGroup>

You should see Transfer events printed to the console:

```text
Transfers: 42
  0x1234...5678 -> 0xabcd...ef01: 1000000n
  0xabcd...ef01 -> 0x5678...1234: 500000n
...
```

</Step>
</Steps>

## Complete Code

<AccordionGroup>
<Accordion title="View complete code with explanations">
The complete code retrieves and decodes ERC20 Transfer events from Ethereum mainnet.

```ts index.ts
import {
  commonAbis,
  createEvmDecoder,
  createEvmPortalSource,
} from "@sqd-pipes/pipes/evm";

async function main() {
  // Create a Portal source that streams blockchain data
  const source = createEvmPortalSource({
    portal: "https://portal.sqd.dev/datasets/ethereum-mainnet",
  });

  // Create a decoder that automatically decodes Transfer events
  const decoder = createEvmDecoder({
    // Process blocks 20000000 to 20000100
    range: { from: 20000000, to: 20000100 },
    // Monitor the USDC token contract
    contracts: ["0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"],
    // Decode Transfer events using the standard ERC20 ABI
    events: {
      transfer: commonAbis.erc20.events.Transfer,
    },
  });

  // Stream and process decoded events
  for await (const { data } of source.pipe(decoder)) {
    console.log(`Transfers: ${data.transfer.length}`);
    // Each transfer contains decoded event data
    for (const transfer of data.transfer) {
      console.log(
        `  ${transfer.event.from} -> ${transfer.event.to}: ${transfer.event.value}`
      );
    }
  }
}

void main();
```

### How it works

1. **Portal source**: `createEvmPortalSource` connects to the Portal API and streams blockchain data
2. **Decoder**: `createEvmDecoder` filters and decodes smart contract events using ABIs
3. **Pipe**: `.pipe()` chains the decoder to the source
4. **Stream**: The `for await` loop processes batches of decoded data as they arrive

### Data structure

Each decoded Transfer event contains:

- `blockNumber`: Block number where the event occurred
- `timestamp`: Block timestamp
- `contract`: Contract address that emitted the event
- `transactionHash`: Transaction hash
- `event`: Decoded event fields (`from`, `to`, `value`)
- `rawEvent`: Raw event log data

### Next steps

- Use `range: { from: 'latest' }` to stream from the latest blocks
- Add multiple contracts or event types
- Use `createTarget` to persist data to a database
- See [Basics](/en/sdk/pipes-sdk/basics) for more examples

</Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
<Card
  title="Basics"
  icon="book"
  href="/en/sdk/pipes-sdk/basics"
>
  Learn fundamental concepts
</Card>

<Card
  title="Stateful Indexing"
  icon="database"
  href="/en/sdk/pipes-sdk/stateful-indexing"
>
  Handle cursors and forks
</Card>

<Card
  title="Core Concepts"
  icon="lightbulb"
  href="/en/sdk/pipes-sdk/core-concepts/core-concepts"
>
  Understand the architecture
</Card>

<Card
  title="Reference"
  icon="code"
  href="/en/sdk/pipes-sdk/reference/sources-decoders"
>
  API reference
</Card>
</CardGroup>
