---
title: "Quickstart"
description: "Build a pipe in 5 minutes"
---

Index ERC20 transfers from Ethereum mainnet.

## Prerequisites

- Node.js 18+ installed
- TypeScript project initialized

## Build Your First Pipe

<Steps>
<Step title="Install Pipes SDK">
  Add the Pipes package to your project.

  <CodeGroup>
  ```bash npm
  npm install @sqd-pipes/pipes
  ```

```bash pnpm
pnpm add @sqd-pipes/pipes
```

```bash yarn
yarn add @sqd-pipes/pipes
```

```bash bun
bun add @sqd-pipes/pipes
```

  </CodeGroup>

{" "}

<Note>
  The package name is `@sqd-pipes/pipes` and includes everything you need for
  EVM data indexing.
</Note>

  <Check>
  Verify installation by checking your `package.json` for `@sqd-pipes/pipes`.
  </Check>
</Step>

<Step title="Create the data pipeline">
  Build the complete data pipeline that streams and decodes ERC20 transfers.

### Import and create the source

Start by importing the necessary functions and creating a Portal data source.

```ts index.ts focus={1,4-6}
import {
  commonAbis,
  createEvmDecoder,
  createEvmPortalSource,
} from "@sqd-pipes/pipes/evm";

async function cli() {
  const stream = createEvmPortalSource({
    portal: "https://portal.sqd.dev/datasets/ethereum-mainnet",
  });
}
```

{" "}

<Note>
  Portal URLs are dataset endpoints that provide access to blockchain data. See
  [all available networks](/en/data/networks/evm) for other chains.
</Note>

### Chain the decoder

Use `.pipe()` to chain a decoder that automatically handles ERC20 Transfer events.

```ts index.ts focus={6-12}
import {
  commonAbis,
  createEvmDecoder,
  createEvmPortalSource,
} from "@sqd-pipes/pipes/evm";

async function cli() {
  const stream = createEvmPortalSource({
    portal: "https://portal.sqd.dev/datasets/ethereum-mainnet",
  }).pipe(
    createEvmDecoder({
      range: { from: "latest" },
      events: {
        transfers: commonAbis.erc20.events.Transfer,
      },
    })
  );
}
```

{" "}

<Note>
  `createEvmDecoder` automatically decodes smart contract events using ABIs. The
  `commonAbis.erc20.events.Transfer` provides the standard ERC20 Transfer event
  ABI.
</Note>

  <Tip>
  The `range: { from: 'latest' }` option tells the pipe to start streaming from the latest available blocks. You may need to wait for new blocks to be produced to see data.
  </Tip>

### Process the stream

Add a loop to process the decoded transfer data as it streams in.

```ts index.ts focus={19-21,24}
import {
  commonAbis,
  createEvmDecoder,
  createEvmPortalSource,
} from "@sqd-pipes/pipes/evm";

async function cli() {
  const stream = createEvmPortalSource({
    portal: "https://portal.sqd.dev/datasets/ethereum-mainnet",
  }).pipe(
    createEvmDecoder({
      range: { from: "latest" },
      events: {
        transfers: commonAbis.erc20.events.Transfer,
      },
    })
  );

  for await (const { data } of stream) {
    console.log(data.transfers.length);
  }
}

void cli();
```

{" "}

<Tip>
  The `for await` loop processes batches of decoded data as they stream in. Each
  `data.transfers` contains all decoded Transfer events from the current batch.
</Tip>

  <Check>
  Your complete `index.ts` should now have imports, the source, decoder, and processing loop all in one clean chain.
  </Check>
</Step>

<Step title="Execute the script">
  Run your pipe to start indexing.

  <CodeGroup>
  ```bash tsx
  npx tsx index.ts
  ```

```bash ts-node
npx ts-node index.ts
```

```bash bun
bun index.ts
```

  </CodeGroup>

You should see transfer counts streaming to the console as new blocks are processed:

```text
42
15
87
23
...
```

  <AccordionGroup>
  <Accordion title="View sample transfer data">
  Each transfer in `data.transfers` is a decoded ERC20 Transfer event with the following structure:

```json
{
  "from": "0x1234567890123456789012345678901234567890",
  "to": "0x0987654321098765432109876543210987654321",
  "value": 1000000n
}
```

The decoder automatically extracts the `from`, `to`, and `value` fields from the raw event data. BigInt values (like `value`) are represented with the `n` suffix.

  </Accordion>
  </AccordionGroup>

  <Check>
  Your pipe is working if you see transfer counts streaming to the console. The numbers represent how many ERC20 transfers were found in each block batch.
  </Check>
</Step>
</Steps>

## Complete Code

<AccordionGroup>
<Accordion title="View complete code">
```ts index.ts
import { commonAbis, createEvmDecoder, createEvmPortalSource } from '@sqd-pipes/pipes/evm'

async function cli() {
const stream = createEvmPortalSource({
portal: 'https://portal.sqd.dev/datasets/ethereum-mainnet',
}).pipe(
createEvmDecoder({
range: { from: 'latest' },
events: {
transfers: commonAbis.erc20.events.Transfer,
},
}),
)

for await (const { data } of stream) {
console.log(data.transfers.length)
}
}

void cli()

```
</Accordion>
</AccordionGroup>

<Card
  title="See code on GitHub"
  icon="github"
  href="https://github.com/subsquid-labs/pipes-sdk/blob/main/docs/examples/evm/01.basic-piping.example.ts"
>
  View the complete example in the pipes-sdk repository
</Card>

## Next Steps

<CardGroup cols={2}>
<Card
  title="Core Concepts"
  icon="book"
  href="/en/sdk/pipes-sdk/core-concepts/core-concepts"
>
  Understand the architecture
</Card>

<Card
  title="Query Builder"
  icon="filter"
  href="/en/sdk/pipes-sdk/core-concepts/query-builder"
>
  Learn query building
</Card>

<Card
  title="Event Decoding"
  icon="code"
  href="/en/sdk/pipes-sdk/core-concepts/event-decoding"
>
  Decode smart contract events
</Card>

<Card
  title="Examples"
  icon="lightbulb"
  href="/en/sdk/pipes-sdk/examples/getting-started"
>
  See more examples
</Card>
</CardGroup>

```
