---
title: "Monitor Contract Deployments"
description: "Track new smart contract deployments using Portal"
---

import { QueryInterfaceContractDeployments } from "/snippets/portal/evm/contract-deployments.mdx";

Find all new smart contract deployments in a block range to track protocol launches, analyze deployment patterns, or monitor for security research.

## Use Case

Contract deployment monitoring helps you:

- Track new protocol and dApp launches
- Analyze deployment patterns and trends
- Monitor for security research and auditing
- Build contract discovery tools

## Code Example

<CodeGroup>
```bash curl
curl -X POST 'https://portal.sqd.dev/datasets/ethereum-mainnet/stream' \
  -H 'Content-Type: application/json' \
  -d '{
    "type": "evm",
    "fromBlock": 20000000,
    "toBlock": 20000003,
    "fields": {
      "block": {
        "number": true,
        "timestamp": true
      },
      "trace": {
        "type": true,
        "createFrom": true,
        "createResultAddress": true
      }
    },
    "traces": [{
      "type": ["create", "create2"]
    }]
  }'
```

```typescript TypeScript
import { DataSource } from "@subsquid/portal-client";

const dataSource = new DataSource({
  network: "ethereum-mainnet",
});

const blocks = await dataSource.getBlocks({
  from: 20000000,
  to: 20000003,
  fields: {
    block: { number: true, timestamp: true },
    trace: {
      type: true,
      createFrom: true,
      createResultAddress: true,
    },
  },
  traces: [
    {
      type: ["create", "create2"],
    },
  ],
});

// Process deployments from traces
// Traces with type "create" or "create2" indicate contract deployments
for (const block of blocks) {
  for (const trace of block.traces) {
    if (trace.type === "create" || trace.type === "create2") {
      console.log({
        blockNumber: block.header.number,
        timestamp: block.header.timestamp,
        deployer: trace.createFrom,
        contractAddress: trace.result?.address || trace.createResultAddress,
        type: trace.type,
      });
    }
  }
}
```

```python Python
import requests
import json

url = "https://portal.sqd.dev/datasets/ethereum-mainnet/stream"
headers = {"Content-Type": "application/json"}

payload = {
    "type": "evm",
    "fromBlock": 20000000,
    "toBlock": 20000003,
    "fields": {
        "block": {
            "number": True,
            "timestamp": True
        },
        "trace": {
            "type": True,
            "createFrom": True,
            "createResultAddress": True
        }
    },
    "traces": [{
        "type": ["create", "create2"]
    }]
}

response = requests.post(url, headers=headers, json=payload)

# Process deployments from traces
# Traces with type "create" or "create2" indicate contract deployments
for line in response.text.strip().split('\n'):
    block = json.loads(line)
    for trace in block.get('traces', []):
        if trace.get('type') in ['create', 'create2']:
            print({
                "blockNumber": block['header']['number'],
                "timestamp": block['header']['timestamp'],
                "deployer": trace.get('createFrom'),
                "contractAddress": (trace.get('result') or {}).get('address') or trace.get('createResultAddress'),
                "type": trace.get('type')
            })
```
</CodeGroup>

<Info>Try it yourself with the interactive query interface below:</Info>

<QueryInterfaceContractDeployments />

## Key Parameters

| Parameter | Description |
|-----------|-------------|
| `type` | Trace type: `"create"` or `"create2"` for contract deployments |
| `createResultAddress` | Address of the newly deployed contract |
| `createFrom` | Deployer address (caller of CREATE/CREATE2) |
| `trace` | Internal transaction trace showing contract creation |

<Note>
Use traces with `type: ["create", "create2"]` to filter for contract deployments. The `createResultAddress` field contains the newly deployed contract address.
</Note>

## Expected Output

```json
{
  "header": {
    "number": 20000001,
    "timestamp": 1705173443
  },
  "traces": [
    {
      "type": "create",
      "createFrom": "0xa9d1e08c7793af67e9d92fe308d5697fb81d3e43",
      "result": {
        "address": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb7"
      }
    }
  ]
}
```

## Filter by Deployer

Track deployments from a specific address:

<CodeGroup>
```bash curl
curl -X POST 'https://portal.sqd.dev/datasets/ethereum-mainnet/stream' \
  -H 'Content-Type: application/json' \
  -d '{
    "type": "evm",
    "fromBlock": 20000000,
    "toBlock": 20000003,
    "fields": {
      "transaction": {
        "hash": true,
        "from": true,
        "contractAddress": true
      }
    },
    "transactions": [{
      "from": ["0x1234567890123456789012345678901234567890"]
    }]
  }'
```

```typescript TypeScript
const DEPLOYER = "0x1234567890123456789012345678901234567890";

const blocks = await dataSource.getBlocks({
  from: 20000000,
  to: 20000003,
  fields: {
    transaction: { hash: true, from: true, contractAddress: true },
  },
  transactions: [
    {
      from: [DEPLOYER],
    },
  ],
});

// Filter for deployments (contractAddress is populated)
for (const block of blocks) {
  for (const tx of block.transactions) {
    if (tx.contractAddress) {
      console.log({
        deployer: tx.from,
        contractAddress: tx.contractAddress,
        txHash: tx.hash,
      });
    }
  }
}
```

```python Python
deployer = "0x1234567890123456789012345678901234567890"

payload = {
    "type": "evm",
    "fromBlock": 20000000,
    "toBlock": 20000003,
    "fields": {
        "transaction": {
            "hash": True,
            "from": True,
            "contractAddress": True
        }
    },
    "transactions": [{
        "from": [deployer]
    }]
}

response = requests.post(url, headers=headers, json=payload)

# Filter for deployments (contractAddress is populated)
for line in response.text.strip().split('\n'):
    block = json.loads(line)
    for tx in block.get('transactions', []):
        if tx.get('contractAddress'):
            print({
                "deployer": tx['from'],
                "contractAddress": tx['contractAddress'],
                "txHash": tx['hash']
            })
```
</CodeGroup>

## Analyze Bytecode Size

Group deployments by bytecode size to find patterns:

<CodeGroup>
```typescript TypeScript
const deployments = [];

for (const block of blocks) {
  for (const tx of block.transactions) {
    if (tx.contractAddress) {
      const bytecodeSize = tx.input.length / 2 - 1; // Convert hex to bytes
      
      deployments.push({
        address: tx.contractAddress,
        deployer: tx.from,
        bytecodeSize,
        block: block.header.number,
      });
    }
  }
}

// Find large contracts (>24KB, near the limit)
const largeContracts = deployments.filter(d => d.bytecodeSize > 24000);
console.log(`Found ${largeContracts.length} contracts near the 24KB limit`);
```
</CodeGroup>

<Tip>
Ethereum has a 24KB contract size limit. Contracts approaching this limit may use proxy patterns or optimizations.
</Tip>

## Detect Proxy Patterns

Identify potential proxy deployments by bytecode patterns:

<CodeGroup>
```typescript TypeScript
// Simple heuristic: small bytecode often indicates a proxy
const MIN_PROXY_SIZE = 50;   // Minimal proxy is ~45 bytes
const MAX_PROXY_SIZE = 500;  // Most proxies are under 500 bytes

for (const block of blocks) {
  for (const tx of block.transactions) {
    if (tx.contractAddress) {
      const bytecodeSize = tx.input.length / 2 - 1;
      
      if (bytecodeSize >= MIN_PROXY_SIZE && bytecodeSize <= MAX_PROXY_SIZE) {
        console.log({
          possibleProxy: tx.contractAddress,
          bytecodeSize,
          deployer: tx.from,
        });
      }
    }
  }
}
```
</CodeGroup>

## Track Factory Deployments

Monitor contracts deployed by factory contracts:

<CodeGroup>
```typescript TypeScript
// Track contracts created via CREATE2 or factory patterns
// Factory deployments appear as internal transactions (traces)

const blocks = await dataSource.getBlocks({
  from: 20000000,
  to: 20000003,
  fields: {
    trace: {
      type: true,
      from: true,
      createResultAddress: true,
      createResultCode: true,
    },
  },
  traces: [
    {
      type: ["create", "create2"],
      callFrom: ["0xYourFactoryAddress"],
    },
  ],
});

for (const block of blocks) {
  for (const trace of block.traces) {
    if (trace.createResultAddress) {
      console.log({
        factory: trace.callFrom || trace.createFrom,
        deployed: trace.createResultAddress,
        type: trace.type, // "create" or "create2"
      });
    }
  }
}
```
</CodeGroup>

<Warning>
Factory-deployed contracts don't appear as regular transactions. Use trace queries with `type: ["create", "create2"]` instead.
</Warning>

## Performance Tips

1. **Request minimal fields**: Omit `input` if you don't need bytecode
2. **Use block ranges**: Process 10k-50k blocks at a time
3. **Filter by deployer**: When tracking specific addresses
4. **Post-process bytecode**: Analyze bytecode in your application

## Related Examples

<CardGroup cols={2}>
<Card title="Query Transactions" icon="arrow-right-arrow-left" href="/en/portal/evm/examples/query-transactions">
  Monitor transaction activity
</Card>

<Card title="Query Traces" icon="diagram-project" href="/en/portal/evm/examples/query-traces">
  Track factory deployments with traces
</Card>

<Card title="Query Event Logs" icon="file-lines" href="/en/portal/evm/examples/query-logs">
  Monitor contract events
</Card>

<Card title="API Reference" icon="book" href="/en/portal/evm/api-reference">
  View complete API docs
</Card>
</CardGroup>

